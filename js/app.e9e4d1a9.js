(function(t){function e(e){for(var a,i,c=e[0],l=e[1],u=e[2],d=0,f=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&f.push(r[i][0]),r[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);s&&s(e);while(f.length)f.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,c=1;c<n.length;c++){var l=n[c];0!==r[l]&&(a=!1)}a&&(o.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},r={app:0},o=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/city_development/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var s=l;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0972":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);var a=n("20cf"),r=n.n(a),o=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2b0e")),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("main-page")],1)},c=[],l=n("5530"),u=n("2f62"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",{staticClass:"is-relative",staticStyle:{height:"100%"}},[t._m(0),n("main-map"),t.downloaded?n("main-ranger"):t._e(),t.downloaded?t._e():n("div",{staticClass:"preloader"},[n("pulse-loader",{attrs:{loading:!t.downloaded}})],1)],1)},d=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title"},[n("span",{staticStyle:{"margin-right":"2rem"}},[t._v("Explore it")]),n("span",{staticStyle:{display:"inline-block",transform:"rotate(90deg)"}},[t._v("=)")])])}],f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"map"}})},p=[],m=(n("99af"),n("7db0"),n("0481"),n("4160"),n("caad"),n("a15b"),n("d81d"),n("4069"),n("b0c0"),n("07ac"),n("ac1f"),n("2532"),n("466d"),n("841c"),n("159b"),n("2909")),g=(n("b64b"),{1256:{name:"Середньовіччя",from:1256,to:1772,color:"#304966"},1773:{name:"Австрія",from:1773,to:1848,color:"#355070"},1849:{name:"Австрія-автономна",from:1849,to:1918,color:"#6D597A"},1919:{name:"Польща",from:1919,to:1939,color:"#B56576"},1940:{name:"Сталінки",from:1940,to:1953,color:"#E56B6F"},1954:{name:"Хрущовки",from:1954,to:1966,color:"#EAAC8B"},1967:{name:"Брежнівки",from:1967,to:1982,color:"#ffd94b"},1983:{name:"Перестройка",from:1983,to:1991,color:"#86bf2e"},1991:{name:"Пострадянський",from:1991,to:2010,color:"#60a453"},2011:{name:"Глобалізація",from:2011,to:2020,color:"#199900"}}),h={weight:10,opacity:.7,fillOpacity:.7},b={weight:1},v={color:"#707070",opacity:1,fillOpacity:.9,stroke:!0},y=function(t){var e=+t.properties.start_date,n=t.geometry.type;"Polygon"===n&&Object.assign(v,b),"Point"===n&&Object.assign(v,h);var a=+Object.keys(g).reverse().find((function(t){return t<=e}));return Object.assign(v,g[a])},j=n("e11e"),O=n.n(j);n("5118");O.a.Icon.Default.imagePath=".",delete O.a.Icon.Default.prototype._getIconUrl,O.a.Icon.Default.mergeOptions({iconRetinaUrl:n("584d"),iconUrl:n("6397"),shadowUrl:n("e2b9")});var _={computed:Object(l["a"])(Object(l["a"])({},Object(u["c"])({defaultStartPoint:function(t){return t.defaultStartPoint},filteredBuildings:function(t){return t.filteredBuildings}})),{},{isALotBuildings:function(){return this.filteredBuildings.length>1e3&&this.mapFull.getZoom()<16},startLocation:function(){var t=/(\?|\&)([^=]+)\=([^&]+)/gi,e=/[-]{0,1}[\d]*[.]{0,1}[\d]+/g,n={lat:this.defaultStartPoint[0],lng:this.defaultStartPoint[1],z:17};if(!window.location.search)return n;var a=window.location.search.match(t),r=a.find((function(t){return t.includes("lat")})),o=a.find((function(t){return t.includes("lng")})),i=a.find((function(t){return t.includes("z")}));return r&&o&&i?{lat:+r.match(e)[0],lng:+o.match(e)[0],z:+i.match(e)[0]}:n}}),data:function(){return{mapFull:null,geojsonLayer:null}},methods:Object(l["a"])(Object(l["a"])({},Object(u["b"])({changeBBox:"act_changeBBox"})),{},{createMap:function(){var t=this.startLocation,e=t.lat,n=t.lng,a=t.z;this.mapFull=O.a.map("map",{renderer:O.a.canvas()}).setView([e,n],a),O.a.tileLayer("http://www.toolserver.org/tiles/bw-mapnik/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(this.mapFull),this.updateUrlCoordinates(),this.changeBBox(this.calculateBBoxBounds()),this.mapFull.on("dragend",this.handleMapMove),this.mapFull.on("zoomend",this.handleMapZoom)},createLegend:function(){var t=O.a.control({position:"bottomright"});t.onAdd=function(t){var e=O.a.DomUtil.create("div","info legend"),n=Object.values(g).map((function(t){return'<div class="legend-item">'+'<div class="item-value" style="background-color:'.concat(t.color,'">').concat(t.from,"-").concat(t.to,"</div>")+'<div class="item-name">'.concat(t.name,"</div>")+"</div>"})).join(""),a='<div class="legeng-content">'.concat(n,"</div>");return e.innerHTML=a,e},t.addTo(this.mapFull)},handleMapZoom:function(){this.updateUrlCoordinates(),this.mapFull.getZoom()<13&&this.mapFull.removeLayer(this.geojsonLayer)},handleMapMove:function(){this.updateUrlCoordinates(),this.mapFull.getZoom()<=13||this.changeBBox(this.calculateBBoxBounds())},updateUrlCoordinates:function(){var t=this.mapFull.getCenter(),e=t.lat,n=t.lng,a="?lat=".concat(e,"&lng=").concat(n,"&z=").concat(this.mapFull.getZoom());history.pushState({},null,this.$route.path+a)},calculateBBoxBounds:function(){return Object.values(this.mapFull.getBounds()).map((function(t){return Object.values(t).map((function(t){return t}))})).flat().join(",")},initCompositions:function(){var t=this;this.mapFull.hasLayer(this.geojsonLayer)&&this.mapFull.removeLayer(this.geojsonLayer),this.geojsonLayer=null;var e=this.filteredBuildings,n={type:"FeatureCollection",crs:{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}},features:Object(m["a"])(e)};this.isALotBuildings?(this.geojsonLayer=O.a.featureGroup(),e.forEach((function(e){var n=e.geometry.coordinates[0][0].reverse();e.geometry.type="Point";var a=y(e);new O.a.circle(n,2,a).addTo(t.geojsonLayer)}))):this.geojsonLayer=O.a.geoJSON(n,{style:y}).bindPopup((function(t){var e=t.feature.properties,n=e["addr:housenumber"],a=e["addr:street"],r=e.name,o=(e.start_date,e.wikipedia);return"<div>\n                ".concat(r?"<p>".concat(r,"</p>"):"","\n                <p>").concat(a,", ").concat(n,"</p>\n                ").concat(o?'<p><a href="https://wikipedia.org/wiki/'.concat(o,'" target="_blank">Wiki</a></p>'):"","\n              </div>")})).bindTooltip((function(t){return t.feature.properties.start_date})),this.geojsonLayer.addTo(this.mapFull)}}),watch:{filteredBuildings:function(t){this.initCompositions()}},mounted:function(){this.createMap(),this.createLegend()}},w=_,B=(n("83cc"),n("2877")),x=Object(B["a"])(w,f,p,!1,null,null,null),F=x.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ranger"},[n("el-slider",{attrs:{id:"ranger",min:t.mostOldest,max:t.mostYoungest,step:t.rangeStep,vertical:"",range:"",marks:t.rangeLabels,height:"400px"},model:{value:t.filterValue,callback:function(e){t.filterValue=e},expression:"filterValue"}})],1)},M=[],P={data:function(){return{filterValue:[0,0]}},computed:Object(l["a"])(Object(l["a"])({},Object(u["c"])({currentFilter:function(t){return t.currentFilter},buildingYears:function(t){return t.buildingYears}})),{},{mostOldest:function(){return Math.min.apply(Math,Object(m["a"])(this.buildingYears))},mostYoungest:function(){return Math.max.apply(Math,Object(m["a"])(this.buildingYears))},rangeStep:function(){return(this.mostYoungest-this.mostOldest)/20},rangeLabels:function(){var t={},e=this.mostYoungest;while(e>this.mostOldest)t[e]={label:this.$createElement("strong",parseInt(e))},e-=this.rangeStep;return t}}),methods:Object(l["a"])(Object(l["a"])({},Object(u["b"])({changeCurrentFilter:"act_changeCurrentFilter"})),{},{setInitialBuildings:function(){this.changeCurrentFilter(this.mostYoungest),this.filterValue=[this.mostOldest,this.mostYoungest]}}),watch:{filterValue:function(t){this.changeCurrentFilter(t)}},created:function(){this.setInitialBuildings()}},S=P,C=Object(B["a"])(S,L,M,!1,null,null,null),k=C.exports,Y=n("8a5d"),T={components:{MainMap:F,MainRanger:k,PulseLoader:Y["a"]},computed:Object(l["a"])({},Object(u["c"])({downloaded:function(t){return t.downloaded}}))},E=T,U=(n("a006"),Object(B["a"])(E,s,d,!1,null,null,null)),I=U.exports,$={components:{MainPage:I},methods:Object(l["a"])({},Object(u["b"])({getBuildings:"act_getBuildings"})),created:function(){this.getBuildings()}},z=$,D=(n("5c0b"),Object(B["a"])(z,i,c,!1,null,null,null)),V=D.exports,A=n("8c4f");o["default"].use(A["a"]);var Z=new A["a"]({mode:"history",routes:[]}),R=(n("4de4"),n("d3b7"),n("6062"),n("3ca3"),n("ddb0"),n("bc3a")),J=n.n(R);o["default"].use(u["a"]);var G=new u["a"].Store({state:{defaultStartPoint:[49.8416169,24.0312634],baseUrl:"https://www.overpass-api.de/api/interpreter",expectedType:"json",expectedDataRules:['relation["building"]["start_date"]','way["building"]["start_date"]'],bbox:"",endParams:"out geom",results:[],downloaded:!1,currentFilter:[0,0],buildingYears:[],filteredBuildings:[]},getters:{},mutations:{mutate_results:function(t,e){t.results=e},mutate_downloaded:function(t,e){t.downloaded=e},mutate_bbox:function(t,e){t.bbox=e},mutate_currentFilter:function(t,e){t.currentFilter=e},mutate_buildingYears:function(t,e){var n=e.map((function(t){return t.tags.start_date.length<5?parseInt(t.tags.start_date):null})).filter((function(t){return t}));t.buildingYears=Object(m["a"])(new Set(n))},mutate_filteredBuildings:function(t){t.filteredBuildings=[],t.results.forEach((function(e){if(t.currentFilter[1]>=+e.tags.start_date&&t.currentFilter[0]<=+e.tags.start_date){var n={type:"Feature",properties:Object(l["a"])({id:e.id},e.tags),geometry:{type:"Polygon"}};"way"===e.type?n.geometry.coordinates=[e.geometry.map((function(t){return Object.values(t).reverse()}))]:"relation"===e.type&&(n.geometry.coordinates=[e.members.find((function(t){return"outer"===t.role})).geometry.map((function(t){return Object.values(t).reverse()}))]),t.filteredBuildings.push(n)}}))}},actions:{act_getBuildings:function(t){var e=t.state,n=t.commit;this.state.bbox&&J.a.get("".concat(e.baseUrl,"?data=[out:").concat(e.expectedType,"];(").concat(e.expectedDataRules.map((function(t){return"".concat(t,"(").concat(e.bbox,");")})).join(""),");").concat(e.endParams,";")).then((function(t){n("mutate_results",t.data.elements),setTimeout((function(){return n("mutate_downloaded",!0)}),100)})).then((function(){return n("mutate_buildingYears",e.results)})).catch((function(t){return console.log(t)}))},act_changeBBox:function(t,e){var n=t.commit,a=t.dispatch;n("mutate_bbox",e),n("mutate_downloaded",!1),a("act_getBuildings")},act_changeCurrentFilter:function(t,e){var n=t.commit;n("mutate_currentFilter",e),n("mutate_filteredBuildings")}}});n("6cc5"),n("b5c2");o["default"].use(r.a),o["default"].config.productionTip=!1,new o["default"]({router:Z,store:G,render:function(t){return t(V)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var a=n("9c0c"),r=n.n(a);r.a},"7a34":function(t,e,n){},"83cc":function(t,e,n){"use strict";var a=n("7a34"),r=n.n(a);r.a},"9c0c":function(t,e,n){},a006:function(t,e,n){"use strict";var a=n("0972"),r=n.n(a);r.a}});
//# sourceMappingURL=app.e9e4d1a9.js.map